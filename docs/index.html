<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Catime - AI Cat Gallery</title>
  <meta name="description" content="Catime - æ¯å°æ™‚ AI è‡ªå‹•ç”Ÿæˆçš„è²“å’ªè—è¡“ Galleryã€‚ä½¿ç”¨ Gemini AI å‰µä½œç¨ç‰¹é¢¨æ ¼çš„è²“å’ªåœ–ç‰‡ã€‚">
  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@graph": [
        {
          "@type": "WebSite",
          "name": "Catime - AI Cat Gallery",
          "description": "Catime - æ¯å°æ™‚ AI è‡ªå‹•ç”Ÿæˆçš„è²“å’ªè—è¡“ Galleryã€‚ä½¿ç”¨ Gemini AI å‰µä½œç¨ç‰¹é¢¨æ ¼çš„è²“å’ªåœ–ç‰‡ã€‚",
          "url": "https://yazelin.github.io/catime/",
          "author": {
            "@type": "Person",
            "name": "Yazelin"
          },
          "dateModified": "2026-02-11"
        },
        {
          "@type": "ImageGallery",
          "name": "Catime - AI Cat Gallery",
          "description": "Catime - æ¯å°æ™‚ AI è‡ªå‹•ç”Ÿæˆçš„è²“å’ªè—è¡“ Galleryã€‚ä½¿ç”¨ Gemini AI å‰µä½œç¨ç‰¹é¢¨æ ¼çš„è²“å’ªåœ–ç‰‡ã€‚",
          "url": "https://yazelin.github.io/catime/",
          "author": {
            "@type": "Person",
            "name": "Yazelin"
          },
          "dateModified": "2026-02-11"
        }
      ]
    }
  </script>
  <meta property="og:title" content="Catime - AI Cat Gallery">
  <meta property="og:description" content="æ¯å°æ™‚ AI è‡ªå‹•ç”Ÿæˆçš„è²“å’ªè—è¡“ Galleryã€‚ä½¿ç”¨ Gemini AI å‰µä½œç¨ç‰¹é¢¨æ ¼çš„è²“å’ªåœ–ç‰‡ã€‚">
  <meta property="og:image" content="https://yazelin.github.io/catime/icon-192.png">
  <meta property="og:url" content="https://yazelin.github.io/catime/">
  <meta property="og:type" content="website">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Catime - AI Cat Gallery">
  <meta name="twitter:description" content="æ¯å°æ™‚ AI è‡ªå‹•ç”Ÿæˆçš„è²“å’ªè—è¡“ Galleryã€‚ä½¿ç”¨ Gemini AI å‰µä½œç¨ç‰¹é¢¨æ ¼çš„è²“å’ªåœ–ç‰‡ã€‚">
  <meta name="twitter:image" content="https://yazelin.github.io/catime/icon-192.png">
  <link rel="canonical" href="https://yazelin.github.io/catime/">
  <meta name="theme-color" content="#ff6b9d">
  <link rel="manifest" href="manifest.json">
  <link rel="preconnect" href="https://raw.githubusercontent.com" crossorigin>
  <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="icon" href="favicon.ico" sizes="any">
  <link rel="icon" href="favicon-32.png" type="image/png" sizes="32x32">
  <link rel="icon" href="icon-192.png" type="image/png" sizes="192x192">
  <link rel="apple-touch-icon" href="apple-touch-icon.png">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header id="topbar">
    <img src="icon-192.png" alt="Catime" class="logo-icon">
    <h1>Catime <span id="cat-count" class="cat-count"></span></h1>
    <div class="filters">
      <input type="search" id="search-input" class="search-input" placeholder="Search #number or title...">
      <button id="random-cat-btn" class="random-cat-button" title="éš¨æ©Ÿä¸€å–µ" aria-label="éš¨æ©Ÿä¸€å–µ">ğŸ² éš¨æ©Ÿä¸€å–µ</button>
      <select id="character-filter">
        <option value="">All Characters</option>
      </select>
      <select id="inspiration-filter">
        <option value="">All Inspiration</option>
        <option value="original">åŸå‰µ</option>
        <option value="news">æ–°èéˆæ„Ÿ</option>
      </select>
      <select id="model-filter">
        <option value="">All Models</option>
      </select>
      <div class="date-picker" id="date-picker">
        <button class="date-picker-btn" id="date-picker-btn"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg> All Dates</button>
        <div class="date-dropdown hidden" id="date-dropdown">
          <div class="dd-header">
            <button class="dd-nav" id="dd-prev">&lsaquo;</button>
            <span id="dd-month-label"></span>
            <button class="dd-nav" id="dd-next">&rsaquo;</button>
          </div>
          <div class="dd-weekdays">
            <span>Su</span><span>Mo</span><span>Tu</span><span>We</span><span>Th</span><span>Fr</span><span>Sa</span>
          </div>
          <div class="dd-days" id="dd-days"></div>
          <button class="dd-clear" id="dd-clear">Clear</button>
        </div>
      </div>
    </div>
    <button id="theme-toggle" class="theme-toggle" aria-label="åˆ‡æ›æ·±æ·ºæ¨¡å¼" title="åˆ‡æ›æ·±æ·ºæ¨¡å¼">ğŸŒ™</button>
    <a href="https://github.com/yazelin/catime" target="_blank" rel="noopener" class="github-link" title="View on GitHub">
      <svg viewBox="0 0 16 16" width="22" height="22" fill="currentColor"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.01 8.01 0 0016 8c0-4.42-3.58-8-8-8z"/></svg>
    </a>
  </header>

  <div id="character-bar" class="character-bar"></div>

  <nav id="timeline" aria-label="Timeline navigation">
    <button id="timeline-toggle" aria-label="Toggle timeline"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg></button>
    <div id="timeline-list"></div>
  </nav>

  <button id="back-to-top" class="back-to-top" aria-label="Back to top">â†‘</button>

  <main id="gallery" class="masonry">
    <div class="skeleton-card" aria-hidden="true"><div class="skeleton-img"></div><div class="skeleton-line w80"></div><div class="skeleton-line w50"></div></div>
    <div class="skeleton-card" aria-hidden="true"><div class="skeleton-img"></div><div class="skeleton-line w80"></div><div class="skeleton-line w50"></div></div>
    <div class="skeleton-card" aria-hidden="true"><div class="skeleton-img"></div><div class="skeleton-line w80"></div><div class="skeleton-line w50"></div></div>
    <div class="skeleton-card" aria-hidden="true"><div class="skeleton-img"></div><div class="skeleton-line w80"></div><div class="skeleton-line w50"></div></div>
    <div class="skeleton-card" aria-hidden="true"><div class="skeleton-img"></div><div class="skeleton-line w80"></div><div class="skeleton-line w50"></div></div>
    <div class="skeleton-card" aria-hidden="true"><div class="skeleton-img"></div><div class="skeleton-line w80"></div><div class="skeleton-line w50"></div></div>
  </main>
  <div id="end-msg" class="hidden">No more cats! ğŸ±</div>

  <section id="giscus-section">
    <h2>ğŸ’¬ ç•™è¨€è¨è«–</h2>
    <script src="https://giscus.app/client.js"
      data-repo="yazelin/catime"
      data-repo-id="R_kgDOREojMg"
      data-category="General"
      data-category-id="DIC_kwDOREojMs4C2KHU"
      data-mapping="pathname"
      data-strict="0"
      data-reactions-enabled="1"
      data-emit-metadata="0"
      data-input-position="top"
      data-theme="light"
      data-lang="zh-TW"
      data-loading="lazy"
      crossorigin="anonymous"
      async>
    </script>
  </section>

  <script>
    // Giscus theme sync
    (function() {
      // Set initial giscus theme based on current site theme
      function getGiscusTheme() {
        return document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'light';
      }

      // Update giscus script data-theme before it loads
      var giscusScript = document.querySelector('script[src*="giscus.app"]');
      if (giscusScript) {
        giscusScript.setAttribute('data-theme', getGiscusTheme());
      }

      // Update giscus iframe theme via postMessage
      function setGiscusTheme(theme) {
        var iframe = document.querySelector('iframe.giscus-frame');
        if (iframe) {
          iframe.contentWindow.postMessage(
            { giscus: { setConfig: { theme: theme } } },
            'https://giscus.app'
          );
        }
      }

      // Listen for theme toggle clicks
      var toggle = document.getElementById('theme-toggle');
      if (toggle) {
        toggle.addEventListener('click', function() {
          setTimeout(function() { setGiscusTheme(getGiscusTheme()); }, 50);
        });
      }

      /*
       * Optional: Inject Giscus comments inside lightbox
       * Uncomment the following block to enable per-image comments in lightbox.
       * Requires a container <div id="lb-giscus"></div> inside #lightbox.
       *
       * function injectLightboxGiscus(term) {
       *   var container = document.getElementById('lb-giscus');
       *   if (!container) return;
       *   container.innerHTML = '';
       *   var s = document.createElement('script');
       *   s.src = 'https://giscus.app/client.js';
       *   s.setAttribute('data-repo', 'yazelin/catime');
       *   s.setAttribute('data-repo-id', 'R_kgDOREojMg');
       *   s.setAttribute('data-category', 'General');
       *   s.setAttribute('data-category-id', 'DIC_kwDOREojMs4C2KHU');
       *   s.setAttribute('data-mapping', 'specific');
       *   s.setAttribute('data-term', term);
       *   s.setAttribute('data-theme', getGiscusTheme());
       *   s.setAttribute('data-lang', 'zh-TW');
       *   s.setAttribute('data-loading', 'lazy');
       *   s.crossOrigin = 'anonymous';
       *   s.async = true;
       *   container.appendChild(s);
       * }
       */
    })();
  </script>

  <div id="lightbox" class="hidden" role="dialog" aria-modal="true">
    <button id="lb-close" aria-label="Close">&times;</button>
    <button id="lb-prev" class="lb-nav lb-prev" aria-label="ä¸Šä¸€å¼µ">â€¹</button>
    <button id="lb-next" class="lb-nav lb-next" aria-label="ä¸‹ä¸€å¼µ">â€º</button>
    <div id="lb-nav-hint" class="lb-nav-hint">â† æ»‘å‹•æˆ–æŒ‰éµåˆ‡æ› â†’</div>
    <div id="lb-info"></div>
    <div id="lb-img-wrap">
      <img id="lb-img" src="" alt="Cat">
      <div id="lb-img-actions">
        <button id="lb-like-btn" title="Like this cat"></button>
        <button id="lb-download-btn" title="Download image"></button>
        <button id="lb-copy-btn" title="Copy prompt"></button>
      </div>
    </div>
    <div id="lb-details">
      <p id="lb-prompt-text" class="hidden"></p>
      <div id="lb-tab-bar"></div>
      <div id="lb-tab-panels">
        <div id="lb-story" class="lb-panel hidden"><p id="lb-story-text"></p></div>
        <div id="lb-idea" class="lb-panel hidden"><p id="lb-idea-text"></p></div>
        <div id="lb-news" class="lb-panel hidden"><div id="lb-news-list"></div></div>
        <div id="lb-avoid" class="lb-panel hidden"><div id="lb-avoid-list"></div></div>
      </div>
    </div>
  </div>

  <script src="dom-utils.js"></script>
  <script src="app.js"></script>
  <script>
    // Populate character bar from characters/index.json
    (function(){
      var bar = document.getElementById('character-bar');
      if (!bar) return;
      var emojis = { mochi: 'ğŸ¡', momo: 'ğŸ–¤', captain: 'âš“', lingling: 'ğŸ””' };
      fetch('../characters/index.json').then(function(r){ return r.json(); }).then(function(idx){
        var chars = (idx.characters || []).filter(function(c){ return c.enabled; });
        chars.forEach(function(c){
          fetch('../characters/' + c.file).then(function(r){ return r.json(); }).then(function(data){
            var a = document.createElement('a');
            a.href = 'character.html?id=' + encodeURIComponent(data.id);
            a.innerHTML = '<span class="char-avatar">' + (emojis[data.id] || 'ğŸ±') + '</span>' +
              '<span>' + (data.name ? data.name.zh : data.id) + '</span>';
            bar.appendChild(a);
          });
        });
      }).catch(function(){});
    })();
  </script>
</body>
</html>
